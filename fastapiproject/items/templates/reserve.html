<!DOCTYPE html>
<html>

<head>
        <!-- Bootstrap 5.2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>STEM Resource User System</title>

    <!-- Basic simple CSS to make layout readable -->
    <style>
        body {
            font-family: Arial;
            margin: 0;
            padding: 0;
            background: #f4f4f4;
        }

        /* Top navigation bar */
        .navbar {
            background: #222;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            /* left and right alignment */
            align-items: center;
        }

        /* Button in the navbar */
        .nav-btn {
            background: #ff4444;
            padding: 10px 14px;
            border-radius: 6px;
            cursor: pointer;
        }

        /* Sections (pages simulated in one HTML file) */
        section {
            display: none;
            /* hidden by default */
            padding: 30px;
        }

        /* The active visible section */
        .active {
            display: block;
        }

        /* Simple card box */
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 8px 12px;
            background: #007bff;
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }

        input {
            padding: 8px;
            width: 90%;
            margin-top: 6px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        table,
        th,
        td {
            border: 1px solid #ddd;
            padding: 10px;
        }
    </style>
</head>

<body>

    <!-- 
        NAVIGATION BAR SECTION
        This bar sits at the top.
        User clicks a button to "switch pages".
    -->
    <div class="navbar">
        <div><b>STEM User System</b></div>

        <!-- Buttons for switching page sections -->
        <div>
            <button class="nav-btn" onclick="openPage('home')">Home</button>
            <button class="nav-btn" onclick="openPage('equip')">Reserve Equipment</button>
            <button class="nav-btn" onclick="openPage('venue')">Reserve Venue</button>
            <button class="nav-btn" onclick="openPage('books')">Books & Manuals</button>
            <button class="nav-btn" onclick="openPage('dashboard')">Dashboard</button>
        </div>
    </div>

    <!-- 
        HOME PAGE
        Shows the four main functions.
    -->
    <section id="home" class="active">
        <h1>Home Page</h1>

        <div class="card">
            <h3>Reserve Lab Equipment</h3>
            <p>Borrow lab apparatus and tools.</p>
            <button onclick="openPage('equip')">Go</button>
        </div>

        <div class="card">
            <h3>Reserve Lab Venue</h3>
            <p>Check available labs & book a time.</p>
            <button onclick="openPage('venue')">Go</button>
        </div>

        <div class="card">
            <h3>Search Books / Manuals</h3>
            <p>Find resources and bookmark them.</p>
            <button onclick="openPage('books')">Go</button>
        </div>

        <div class="card">
            <h3>Terms & Conditions</h3>
            <ul>
                <li>Return items on time (RM1 per hour fine)</li>
                <li>Leave labs before closing (RM5 per hour fine)</li>
                <li>Be responsible for borrowed equipment</li>
            </ul>
        </div>
    </section>

    <!-- 
        RESERVE LAB EQUIPMENT PAGE
        Shows table of available equipment
        User can request amount
    -->
    <section id="equip">
        <h1>Reserve Lab Equipment</h1>

        <table>
            <tr>
                <th>Item Name</th>
                <th>Available</th>
                <th>Reserve</th>
            </tr>

            <tr>
                <td>Beakers</td>
                <td>12</td>
                <td><button onclick="reserveEquip('Beakers')">Reserve</button></td>
            </tr>

            <tr>
                <td>Microscopes</td>
                <td>5</td>
                <td><button onclick="reserveEquip('Microscope')">Reserve</button></td>
            </tr>

            <tr>
                <td>Test Tube Set</td>
                <td>20</td>
                <td><button onclick="reserveEquip('Test Tube Set')">Reserve</button></td>
            </tr>
        </table>

        <p id="equipMsg"></p>
    </section>

    <!-- 
        RESERVE VENUE PAGE
        Shows lab status and booking purpose
    -->
    <section id="venue">
        <h1>Reserve Lab Venue</h1>

        <table>
            <tr>
                <th>Lab Name</th>
                <th>Status</th>
                <th>Reserve</th>
            </tr>

            <tr>
                <td>Physics Lab</td>
                <td>Open</td>
                <td><button onclick="reserveVenue('Physics Lab')">Reserve</button></td>
            </tr>

            <tr>
                <td>Chemistry Lab</td>
                <td>Open</td>
                <td><button onclick="reserveVenue('Chemistry Lab')">Reserve</button></td>
            </tr>

            <tr>
                <td>Biology Lab</td>
                <td>Open</td>
                <td><button onclick="reserveVenue('Biology Lab')">Reverse</button></td>
            </tr>
        </table>

        <p id="venueMsg"></p>
    </section>

    <!-- 
        BOOK SEARCH + BOOKMARK PAGE
        Contains search bar + results + bookmark feature
    -->
    <section id="books">
        <h1>Search Books & Manuals</h1>

        <input type="text" id="searchInput" placeholder="Search book..." onkeyup="searchBook()">

        <div id="bookList" class="card"></div>

    </section>

    <!-- 
        DASHBOARD
        Shows all user bookmarks & reserved items
    -->
    <section id="dashboard">
        <h1>User Dashboard</h1>

        <div class="card">
            <h2>Bookmarked Books</h2>
            <ul id="bookmarkList"></ul>
        </div>

        <div class="card">
            <h2>Reserved Equipment</h2>
            <ul id="reservedEquipList"></ul>
        </div>

        <div class="card">
            <h2>Reserved Venues</h2>
            <ul id="reservedVenueList"></ul>
        </div>
    </section>

    <script>
        /* ============================
           PAGE SWITCHING LOGIC
           ============================ */

        function openPage(pageId) {
            document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
            document.getElementById(pageId).classList.add("active");
        }

        /* ============================
           RESERVE EQUIPMENT LOGIC
           ============================ */

        let reservedEquip = [];

        function reserveEquip(itemName) {
            reservedEquip.push(itemName);
            document.getElementById("equipMsg").innerHTML =
                "Success! You reserved: " + itemName + ". Deadline: Today 4pm.";

            updateDashboard();
        }

        /* ============================
           RESERVE VENUE LOGIC
           ============================ */

        let reservedVenues = [];

        function reserveVenue(labName) {
            let purpose = prompt("Enter purpose of reservation:");
            if (purpose === null || purpose.trim() === "") return;

            reservedVenues.push(labName + " (Purpose: " + purpose + ")");
            document.getElementById("venueMsg").innerHTML =
                "Success! Venue reserved. Deadline: Today 4pm.";

            updateDashboard();
        }

        /* ============================
           BOOK SEARCH + BOOKMARK LOGIC
           ============================ */

        const books = [
            "Engineering Materials Handbook",
            "Biology Lab Manual",
            "Physics Experiment Guide",
            "Chemistry Reaction Handbook",
            "Robotics Programming Basics"
        ];

        let bookmarks = [];

        // Show book list initially
        showBooks(books);

        function showBooks(list) {
            const div = document.getElementById("bookList");
            div.innerHTML = "";

            list.forEach(book => {
                div.innerHTML += `
                    <p>
                        ${book}
                        <button onclick="bookmarkBook('${book}')">Bookmark</button>
                    </p>
                `;
            });
        }

        // Search function
        function searchBook() {
            const text = document.getElementById("searchInput").value.toLowerCase();
            const filtered = books.filter(b => b.toLowerCase().includes(text));
            showBooks(filtered);
        }

        // Bookmark function
        function bookmarkBook(book) {
            if (!bookmarks.includes(book)) {
                bookmarks.push(book);
                alert("Book bookmarked!");
                updateDashboard();
            }
        }

        /* ============================
           UPDATE DASHBOARD
           ============================ */
        function updateDashboard() {

            // Update book bookmarks
            const list1 = document.getElementById("bookmarkList");
            list1.innerHTML = "";
            bookmarks.forEach(b => list1.innerHTML += "<li>" + b + "</li>");

            // Update reserved equipment
            const list2 = document.getElementById("reservedEquipList");
            list2.innerHTML = "";
            reservedEquip.forEach(e => list2.innerHTML += "<li>" + e + "</li>");

            // Update reserved venues
            const list3 = document.getElementById("reservedVenueList");
            list3.innerHTML = "";
            reservedVenues.forEach(v => list3.innerHTML += "<li>" + v + "</li>");
        }

    </script>

</body>

</html>